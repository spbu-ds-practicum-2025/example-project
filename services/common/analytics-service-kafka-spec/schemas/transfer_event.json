{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wallet.example.com/schemas/transfer_event.json",
  "title": "Transfer Completed Event",
  "description": "Event emitted when a money transfer between accounts is successfully completed",
  "type": "object",
  "required": [
    "eventId",
    "eventType",
    "eventTimestamp",
    "operationId",
    "senderId",
    "recipientId",
    "amount",
    "idempotencyKey",
    "status",
    "timestamp"
  ],
  "properties": {
    "eventId": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for this event instance",
      "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
    },
    "eventType": {
      "type": "string",
      "const": "transfer.completed",
      "description": "Type of the event",
      "example": "transfer.completed"
    },
    "eventTimestamp": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp when the event was created (ISO 8601)",
      "example": "2025-11-08T14:30:00.000Z"
    },
    "operationId": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier of the transfer operation",
      "example": "987e6543-e21b-34d3-c456-426614174999"
    },
    "senderId": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier of the sender's account",
      "example": "123e4567-e89b-12d3-a456-426614174000"
    },
    "recipientId": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier of the recipient's account",
      "example": "987e6543-e21b-34d3-c456-426614174999"
    },
    "amount": {
      "$ref": "#/definitions/Amount"
    },
    "idempotencyKey": {
      "type": "string",
      "format": "uuid",
      "description": "Idempotency key used for the transfer operation",
      "example": "550e8400-e29b-41d4-a716-446655440000"
    },
    "status": {
      "type": "string",
      "enum": ["SUCCESS"],
      "description": "Status of the transfer operation",
      "example": "SUCCESS"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp when the transfer was executed (ISO 8601)",
      "example": "2025-11-08T14:30:00.000Z"
    },
    "message": {
      "type": "string",
      "description": "Optional human-readable message about the transfer",
      "example": "Transfer completed successfully"
    }
  },
  "definitions": {
    "Amount": {
      "type": "object",
      "description": "Represents a monetary value with its currency",
      "required": ["value", "currencyCode"],
      "properties": {
        "value": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]{2}$",
          "description": "The numeric value as a string with exactly 2 decimal places",
          "example": "150.50"
        },
        "currencyCode": {
          "type": "string",
          "pattern": "^[A-Z]{3}$",
          "description": "ISO 4217 currency code",
          "example": "RUB"
        }
      }
    }
  },
  "examples": [
    {
      "eventId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
      "eventType": "transfer.completed",
      "eventTimestamp": "2025-11-08T14:30:00.000Z",
      "operationId": "987e6543-e21b-34d3-c456-426614174999",
      "senderId": "123e4567-e89b-12d3-a456-426614174000",
      "recipientId": "987e6543-e21b-34d3-c456-426614174999",
      "amount": {
        "value": "150.50",
        "currencyCode": "RUB"
      },
      "idempotencyKey": "550e8400-e29b-41d4-a716-446655440000",
      "status": "SUCCESS",
      "timestamp": "2025-11-08T14:30:00.000Z",
      "message": "Transfer completed successfully"
    }
  ]
}
